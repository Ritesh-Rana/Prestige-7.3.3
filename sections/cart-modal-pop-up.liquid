<div class="template-cart ajax-popup">
      <div id="add-to-cart" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
          <span class="add-to-cart-close close">&times;</span>
          <strong class="title">Added To Bag</strong>
          <div id="p-float" class="free-gifts">
            <div class="p-float">
              <div class="p-float-in">
                <img class="p-img" src=""/>
                <div class="Alert--error"></div>
              </div>
            </div>
            <div class="p-float p-float-buttons">
              <div class="product_data">
                <div class="p-name"></div>
                <div class="product_qty_price">
                  QTY. <span id="added-qty"> X </span> @ <span id="added-price">$PRICE</span> AUD
                </div>
              </div>
              <div class="p-float-in">
                <a class="continue_shopping continue ProductForm__AddToCart Button Button--primary Button--full" href="javascript:void(0)" onclick="jQuery('.add-to-cart-close').trigger('click');">Continue Shopping</a>
                <a href="/cart" class="view_cart ProductForm__AddToCart Button Button--primary Button--full">View Bag</a>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
{% schema %}
  {
    "name": "Add to Cart Pop-Up",
    "settings": []
  }
{% endschema %}

{% stylesheet %}

  .template-cart .modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 999; /* Sit on top */
  /* padding-top: 100px;  Location of the box */
  left: 0;
  top: 15%;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  /*overflow: auto; /* Enable scroll if needed */
  /*background-color: rgb(0,0,0); /* Fallback color */
  /*background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
 * Float container */
.template-cart #p-float {
  max-width: 1200px;
  margin: 0 auto;
  /* Clearfix */
  overflow: auto;
}
.template-cart #p-float::after {
  /* Clearfix */
  content: "";
  clear: both;
  display: table;
}
/* Product items */
.template-cart div.p-float {
  float: left;
  width: 50%;
}
.template-cart div.p-float-in {
  box-sizing: border-box;
  margin: 5px; 
  padding: 10px;
  border: 1px solid #f2dcdc;
  background: #fff;
}

.template-cart img.p-img {
    /*width: 50%;*/
    height: 200px;
    margin: 0 auto;
    display: block;
}

.template-cart div.p-name {
  font-weight: bold;
  /*font-size: 1.1em;*/
  text-align:center;
}
.template-cart div.p-price {
  color: #f44242;
}
.template-cart div.p-desc {
  color: #888;
  font-size: 0.9em;
  text-align:center;
}
.template-cart button.p-add {
  background: #fff;
  color: #fff;
  width: 100%;
  padding: 10px;
  margin: 10px 5px 5px 5px;
  font-size: 1.1em;
  font-weight: bold;
  cursor: pointer;
}
/* Responsive */
@media only screen and (max-width: 1024px) {
  .template-cart div.p-float { width: 50%; }
  .back-to-sale {float:none !important; position:relative !important;left:0 !important; padding: 10px; margin-bottom: 5px; font-size: 10px;}
}

@media only screen and (max-width: 600px) {
  div.p-float { width: 100% !important; }
  .template-cart .modal-content {width: 100% !important; }
}

/* The Modal (background) */
.template-cart {
  display: none; /* Hidden by default */
  /* position: fixed;  Stay in place */
  z-index: 999; /* Sit on top */
  /*padding-top: 100px; /* Location of the box */
  left: 0;
  top: 30%;
  position:absolute;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  /*overflow: auto; /* Enable scroll if needed */
  /*background-color: rgb(0,0,0); /* Fallback color */
}

/* Modal Content */
.template-cart .modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  text-align:center;
}
{% endstylesheet %}

<script>
  
  // Get all elements with the class 'custom-ajax-cart-pop-up'
    const buttons = document.querySelectorAll(".custom-ajax-cart-pop-up");

  // Attach the click event listener to each button
    buttons.forEach(button => {
      button.addEventListener("click", addtocartajax);
    });

  function addtocartajax(button){
    const Current_Button = button.target;
  const variantId = Current_Button.getAttribute("variant-id");
  
  // Here, 'variantId' will contain the value of the 'variant-id' attribute from the clicked button.
  // You can now use 'variantId' in your AJAX request to the "Add to Cart" API.

  // Example AJAX request using Fetch API:
  fetch("/cart/add.js", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ id:variantId,qty:1 }),
  })
    .then(response => response.json())
    .then(data => {
      // Handle the response from the API as needed
          const imgElement = document.querySelector(".p-img");
          const nameElement = document.querySelector(".p-name");
          const qtyElement = document.querySelector("#added-qty");
          const priceElement = document.querySelector("#added-price");
    
          imgElement.src = data.imgSrc; // Update the image source
          nameElement.textContent = data.name; // Update the product name
          qtyElement.textContent = data.qty; // Update the quantity
          priceElement.textContent = data.price; // Update the price

      // Show the modal
      const modal = document.getElementsByClassName("template-cart");
      const modal = document.getElementById("add-to-cart");
      modal.style.display = "block";
      modal[0].style.display = "block";
      console.log("API response:", data);
    })
    .catch(error => {
      console.error("Error occurred:", error);
    });

  }
  </script>